Example Usage
- from the included script ensembleScript.m 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% exampleScript.m
%
% Description: 
%   Example of how to use the HMM alignment algorithm
%
% Automatic Music Performance Analysis and Analysis Toolkit (AMPACT) 
% http://www.ampact.org
% (c) copyright 2011 Johanna Devaney (j@devaney.ca), all rights reserved.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% audio file to be aligned
audiofile=(‘example.wav’);
% MIDI file to be aligned
midifile=(‘example.mid’);
% number of notes to align
numNotes=6;
% vector of order of states (according to lyrics) in stateOrd and 
% corresponding note numbers in noteNum
%   1 indicates a rest at the beginning of ending of the note
%   2 indicates a transient at the beginning or ending of the note
%   3 indicates a steady state section
% the following encoding is for six syllables “A-ve Ma-ri-(i)-a”
%  syllable      A-ve Ma-ri-(i)-a
%  state type   13 23 23 23  3  31
%  note number  11 22 33 44  5  66
stateOrd  = [1 3 2 3 2 3 2 3 3 3 1];
noteNum =   [1 1 2 2 3 3 4 4 5 6 6];
% load singing means and covariances for the HMM alignment
load SingingMeansCovars.mat
means=sqrtmeans; 
covars=sqrtcovars;
% specify that the means and covariances in the HMM won’t be learned 
learnparams=0;
% run the alignment
[allstate selectstate,spec]=runAlignment(audiofile, midifile, numNotes, stateOrd, noteNum, means, covars, learnparams);
% visualise the alignment
alignmentVisualiser(selectstate,midifile,spec);

AMPACT Function Descriptions
runAlignment.m: Calls the DTW alignment function and refines the results with the HMM alignment algorithm, with both a basic and modified state spaces (based on the lyrics). This function returns the results of both the state spaces as well as the YIN analysis of the specified audio file.
getVals.m: Gets values for DTW alignment and YIN analysis of specified audio signal and MIDI file
runDTWAlignment.m: Performs a dynamic time warping alignment between specified audio and MIDI files and returns a matrix with the aligned onset and offset times  (with corresponding MIDI note numbers) and a spectrogram of the audio
runHMMAlignment.m: Refines DTW alignment values with a three-state HMM, identifying silence,transient, and steady state parts of the signal. The HMM uses the DTW alignment as a prior. 
filltransmat.m: Makes a transition matrix from a seed transition matrix.  The seed matrix is composed of the states: steady state, transient, silence, transient, steady state, but the full transition matrix starts and ends with silence, so the seed with be chopped up on the ends. Notes is the number of times to repeat the seed.  Transseed’s first and last states should be equivalent, as they will be overlapped with each other.
fillpriormat_gauss.m: Creates a prior matrix based on the DTW alignment (supplied by the input variables ons and offs. A rectangular window with half a Gaussian on each side over the onsets and offsets estimated by the DTW alignment. 
selectStates.m: Refines the HMM parameters according to the modiefed state  sequence vector passed into the function.
alignmentVisualiser.m: Plots a gross DTW alignment overlaid with the fine alignment resulting from the HMM aligner on the output of YIN.  Trace(1,:) is the list of states in the HMM, and trace(2,:) is the number of YIN frames for which that state is occupied.  Highlight is a list of notes for which the steady state will be highlighted.

Papers on algorithms developed for AMPACT
Devaney, J., M. I. Mandel, and I. Fujinaga. 2011. Characterizing Singing Voice Fundamental Frequency Trajectories. Proceedings of the 2011 Workshop on Applications of Signal Processing to Audio and Acoustics.
Devaney, J., M. I. Mandel, D. P. W. Ellis, and I. Fujinaga. 2010. Automatically extracting performance data from recordings of trained singers. Psychomusicology: Music, Mind & Brain. 21(1–2): in press.
Devaney, J. 2011. An empirical study of the influence of musical context on intonation practices in solo singers and SATB ensembles. Ph. D. Dissertation. McGill University.
Devaney, J., M. I. Mandel, and D. P. W. Ellis. 2009. Improving MIDI-audio alignment with acoutics features. In Proceedings of the 2009 Workshop on Applications of Signal Processing to Audio and Acoustics.

Papers on algorithms by other authors used by AMPACT
de Cheveigné, A., and H. Kawahara. 2002. YIN, a fundamental frequency estimator for speech and music. Journal of the Acoustical Society of America 111 (4): 1917–30.
Orio, N., and D. Schwarz. 2001. Alignment of monophonic and polyphonic music to a score. In Proceedings of the International Computer Music Conference, 155–8.